CREATE TABLE `ADMIN` (
  `ADMIN_ID` varchar(30) NOT NULL,
  `ADMIN_NM` varchar(30) NOT NULL,
  `PASSWD` varchar(200) NOT NULL,
  `JOIN_DT` timestamp NOT NULL,
  PRIMARY KEY (`ADMIN_ID`)
) ;
CREATE TABLE `USER` (
  `USER_ID` varchar(30) NOT NULL,
  `USER_NM` varchar(30) DEFAULT NULL,
  `BIRTH_DT` char(10) DEFAULT NULL,
  `PASSWD` varchar(200) NOT NULL,
  `ZIPCODE` varchar(10) DEFAULT NULL,
  `ROADADDRESS` varchar(100) DEFAULT NULL,
  `JIBUNADDRES` varchar(100) DEFAULT NULL,
  `NAMUJIADDRESS` varchar(100) DEFAULT NULL,
  `SEX` char(1) DEFAULT NULL,
  `HP` varchar(15) DEFAULT NULL,
  `EMAIL` varchar(50) NOT NULL,
  `EMAIL_YN` char(1) DEFAULT NULL,
  `JOIN_DT` timestamp NOT NULL,
  `PROFILE` varchar(2000) DEFAULT NULL,
  `LIKE_POINT` int DEFAULT '0',
  `EMAIL_CHECK` char(1) DEFAULT 'F',
  `EMAIL_AUTHENTICATION` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`USER_ID`)
);
CREATE TABLE `DIGGING` (
  `DIGGING_ID` bigint NOT NULL AUTO_INCREMENT,
  `WRITER` varchar(30) NOT NULL,
  `CONTENT` varchar(5000) DEFAULT NULL,
  `SUBJECT` VARCHAR(50) NOT NULL,
  `READ_CNT` int DEFAULT '0',
  `DIGGING_TOPIC` varchar(20) DEFAULT NULL,
  `ENROLL_DT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `REPLY_CNT` int DEFAULT '0',
  `THUMBS_UP` int DEFAULT '0',
  `FILE` varchar(3000) DEFAULT NULL,
  `VIDEO_YN` char(1) DEFAULT NULL,
  `VIDEO_ID` varchar(300) DEFAULT NULL,
  main_title_id int,
  sub_title_id  int,
  PRIMARY KEY (`DIGGING_ID`),
  KEY `WRITER` (`WRITER`),
  CONSTRAINT FOREIGN KEY DIGGING(`WRITER`) REFERENCES USER(`USER_ID`),
	FOREIGN KEY (main_title_id) REFERENCES MAIN_TITLE(main_id),
    FOREIGN KEY (sub_title_id) REFERENCES SUB_TITLE(sub_id)	
) ;
CREATE TABLE MAIN_TITLE (
    MAIN_ID INT AUTO_INCREMENT PRIMARY KEY,
    MAIN_TITLE VARCHAR(255) NOT NULL UNIQUE,
    CREATE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE SUB_TITLE (
    SUB_ID INT AUTO_INCREMENT PRIMARY KEY,
    MAIN_ID INT NOT NULL,
    SUB_TITLE VARCHAR(255) NOT NULL,
    CREATE_DT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (main_id) REFERENCES MAIN_TITLE(main_id) ON DELETE CASCADE
);
INSERT INTO MAIN_TITLE (MAIN_TITLE)
VALUES 
	('admin'),
    ('kPop'),
    ('ott'),
    ('animal'),
    ('business'),
    ('sport'),
    ('celeb'),
    ('travel'),
    ('fashion'),
    ('game');

INSERT INTO SUB_TITLE (MAIN_ID ,SUB_TITLE)
VALUES 
	(1, 'notice'), (1,'ad'),
    (2, 'bts'), (2, 'asepa'), (2, 'newJeans'), (2, 'ive'), (2, 'seventeen'), (2, '기타'),
    (3, '선재 업고 튀어'), (3, '지구오락실'), (3, '서진이네2'), (3, '나 혼자 산다'), (3, '나는 솔로'), (3, '기타'),
    (4, '강아지'), (4, '고양이'), (4, '판다'), (4, '기타'),
    (5, 'IT'), (5, '주식'), (5, '부동산'), (5, '기타'),
    (6, '축구'), (6, '야구'), (6, '골프'), (6, '기타'),
    (7, 'tayler swift'), (7, 'Zendaya'), (7, 'Timothee Chalamet'), (7, '기타'),
    (8, '국내'), (8, '동남아'), (8, '미주'), (8, '기타'),
    (9, 'Beauty'), (9, 'Style'), (9, '꿀팁'), (9, '기타'),
    (10, '리그 오브 레전드'), (10, 'FC 온라인'), (10, '배틀그라운드'), (10, '기타');

CREATE TABLE `REPLY` (
  `REPLY_ID` bigint NOT NULL AUTO_INCREMENT,
  `WRITER` varchar(50) NOT NULL,
  `CONTENT` varchar(2000) NOT NULL,
  `ENROLL_DT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DIGGING_ID` bigint NOT NULL,
  PRIMARY KEY (`REPLY_ID`),
  KEY `DIGGING_ID` (`DIGGING_ID`),
  KEY `WRITER` (`WRITER`),
  CONSTRAINT FOREIGN KEY REPLY(`DIGGING_ID`) REFERENCES DIGGING(`DIGGING_ID`) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY REPLY(`WRITER`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE
);
CREATE TABLE `SHOP` (
  `PRODUCT_CD` bigint NOT NULL AUTO_INCREMENT,
  `PRODUCT_NM` varchar(40) DEFAULT NULL,
  `WRITER` varchar(50) NOT NULL,
  `PRICE` int NOT NULL DEFAULT '0',
  `DISCOUNT_RATE` int DEFAULT NULL,
  `STOCK` int NOT NULL DEFAULT '0',
  `SORT` varchar(30) NOT NULL,
  `DELIVERY_PRICE` int NOT NULL,
  `DELIVERY_METHOD` varchar(30) DEFAULT NULL,
  `CONTENT` varchar(3000) DEFAULT NULL,
  `PRODUCT_FILE` varchar(3000) NOT NULL,
  `QNA_CNT` int DEFAULT '0',
  `ENROLL_DT` datetime DEFAULT CURRENT_TIMESTAMP,
  `READ_CNT` int DEFAULT '0',
  PRIMARY KEY (`PRODUCT_CD`),
  KEY `WRITER` (`WRITER`),
  CONSTRAINT FOREIGN KEY SHOP(`WRITER`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE
);
CREATE TABLE `CART` (
  `CART_CD` bigint NOT NULL AUTO_INCREMENT,
  `USER_ID` varchar(30) NOT NULL,
  `PRODUCT_CD` bigint NOT NULL,
  `CART_QTY` int DEFAULT '0',
  `ENROLL_DT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`CART_CD`),
  KEY `USER_ID` (`USER_ID`),
  KEY `PRODUCT_ID` (`PRODUCT_CD`),
  CONSTRAINT FOREIGN KEY CART(`USER_ID`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY CART(`PRODUCT_CD`) REFERENCES SHOP(`PRODUCT_CD`) ON DELETE CASCADE
);
CREATE TABLE `KEEP` (
  `KEEP_CD` bigint NOT NULL AUTO_INCREMENT,
  `USER_ID` varchar(30) NOT NULL,
  `PRODUCT_CD` bigint NOT NULL,
  `KEEP_QTY` int DEFAULT '1',
  `ENROLL_DT` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`KEEP_CD`),
  KEY `USER_ID` (`USER_ID`),
  KEY `PRODUCT_CD` (`PRODUCT_CD`),
  CONSTRAINT FOREIGN KEY KEEP(`USER_ID`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY KEEP(`PRODUCT_CD`) REFERENCES SHOP(`PRODUCT_CD`) ON DELETE CASCADE
);
CREATE TABLE `ORDERED` (
  `ORDER_CD` bigint NOT NULL AUTO_INCREMENT,
  `USER_ID` varchar(30) NOT NULL,
  `PRODUCT_CD` bigint NOT NULL,
  `PAYMENT_AMT` int DEFAULT NULL,
  `ORDERER_NM` varchar(20) NOT NULL,
  `ORDERER_HP` varchar(15) DEFAULT NULL,
  `RECEIVER_NM` varchar(20) NOT NULL,
  `RECEIVER_HP` varchar(15) DEFAULT NULL,
  `ZIPCODE` varchar(10) NOT NULL,
  `ROAD_ADDRESS` varchar(100) DEFAULT NULL,
  `JIBUN_ADDRESS` varchar(100) DEFAULT NULL,
  `NAMUJI_ADDRESS` varchar(100) DEFAULT NULL,
  `DELIVERY_METHOD` varchar(30) NOT NULL,
  `DELIVERY_MESSAGE` varchar(50) DEFAULT NULL,
  `DELIVERY_STATUS` varchar(30) DEFAULT NULL,
  `GIFT_WRAPPING` char(1) DEFAULT NULL,
  `PAY_METHOD` varchar(20) DEFAULT NULL,
  `PAY_ORDERER_HP` varchar(15) DEFAULT NULL,
  `CARD_COMPANY_NM` varchar(5) DEFAULT NULL,
  `CARD_PAY_MONTH` varchar(20) DEFAULT NULL,
  `PAY_ORDER_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `ORDER_QTY` int NOT NULL,
  `ACCOUNT_COMPANY_NM` varchar(10) DEFAULT NULL,
  `ACCOUNT` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ORDER_CD`),
  KEY `USER_ID` (`USER_ID`),
  KEY `PRODUCT_CD` (`PRODUCT_CD`),
  CONSTRAINT FOREIGN KEY ORDERED(`USER_ID`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE,
  CONSTRAINT FOREIGN KEY ORDERED(`PRODUCT_CD`) REFERENCES SHOP(`PRODUCT_CD`) ON DELETE CASCADE
);

CREATE TABLE `CONTACT` (
  `CONTACT_CD` int NOT NULL AUTO_INCREMENT,
  `USER_ID` varchar(30) NOT NULL,
  `SUBJECT` varchar(50) NOT NULL,
  `CONTENT` varchar(3000) NOT NULL,
  `REG_DT` timestamp NULL DEFAULT NULL,
  `REPLY` varchar(500) DEFAULT NULL,
  `REPLY_YN` char(1) DEFAULT 'F',
  `CATEGORY` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`CONTACT_CD`),
  KEY `USER_ID` (`USER_ID`),
  CONSTRAINT FOREIGN KEY CONTACT(`USER_ID`) REFERENCES USER(`USER_ID`) ON DELETE CASCADE
) ;

CREATE TABLE `QNA` (
  `QNA_CD` bigint NOT NULL AUTO_INCREMENT,
  `WRITER` varchar(50) NOT NULL,
  `CONTENT` varchar(500) NOT NULL,
  `ENROLL_DT` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `PRODUCT_CD` bigint DEFAULT NULL,
  `QNA_YN` char(1) DEFAULT 'F',
  `QNA_REPLY` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`QNA_CD`),
  KEY `PRODUCT_CD` (`PRODUCT_CD`),
  CONSTRAINT FOREIGN KEY QNA(`PRODUCT_CD`) REFERENCES SHOP(`PRODUCT_CD`) ON DELETE CASCADE
) ;



